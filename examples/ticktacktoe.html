<!doctype html>
<html>
<head>
	<title>em-websocket-server test</title>
</head>
<body>

<h1>em-websocket-server timesync demo</h1>
<h2 id="time">opening socket</h2>

<script>
	var webSocket = new WebSocket('ws://192.168.0.2:8000/time');
	
	webSocket.onopen = function(event){
		document.getElementById('time').innerHTML = 'waiting for socket';
		webSocket.send("{\"msg\":\"join\"}");
	};
	
	webSocket.onmessage = function(event){
		var object = JSON.parse(event.data);
		console.log(object);
		
		if(object.msg == "turn") {
			//webSocket.send("{\"msg\":\"move\", \"data\":{\"x\":4}}");
		}
		
		document.getElementById('time').innerHTML = object.time;
	};
	
	webSocket.onclose = function(event){
		document.getElementById('time').innerHTML = 'socket closed';
	};
</script>

</body>
</html>